<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parallel Execution Board</title>
<style>
:root{--bg:#0d1117;--surface:#161b22;--surface2:#1c2129;--border:#30363d;--text:#e6edf3;--text-dim:#8b949e;--text-bright:#f0f6fc;--epic:#da3633;--feature:#a371f7;--task:#58a6ff;--critical:#f85149;--gate:#f0883e}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);overflow:hidden}
#header{background:var(--surface);border-bottom:1px solid var(--border);padding:10px 16px;display:flex;align-items:center;gap:12px;z-index:200;position:relative;flex-wrap:wrap}
#header h1{font-size:15px;font-weight:600;white-space:nowrap}
.sb{background:var(--surface2);padding:3px 8px;border-radius:4px;font-size:11px;color:var(--text-dim)}
#search{background:var(--bg);border:1px solid var(--border);color:var(--text);padding:4px 10px;border-radius:6px;font-size:12px;width:150px}
.btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:4px 10px;border-radius:6px;cursor:pointer;font-size:11px;white-space:nowrap}
.btn:hover{border-color:var(--text-dim)} .btn.active{border-color:var(--task);color:var(--task)}
.legend{display:flex;gap:8px;margin-left:auto;font-size:10px;color:var(--text-dim);align-items:center;flex-wrap:wrap}
.ls{width:10px;height:10px;border-radius:2px;display:inline-block;vertical-align:middle}

#board{height:calc(100vh - 46px);overflow:auto;position:relative}
#board table{border-collapse:collapse;width:100%;min-width:1500px;table-layout:fixed}
#board thead{position:sticky;top:0;z-index:50}
#board th{background:var(--surface);border:1px solid var(--border);padding:6px 8px;font-size:11px;font-weight:600;text-align:center}
#board th:first-child{width:140px;min-width:140px;text-align:left;position:sticky;left:0;z-index:60}
#board td{border:1px solid var(--border);padding:5px;vertical-align:top;background:var(--bg);position:relative}
#board td:first-child{background:var(--surface);position:sticky;left:0;z-index:20;width:140px;min-width:140px;font-size:12px;font-weight:600;padding:6px 8px}
.lane-count{font-size:10px;color:var(--text-dim);font-weight:400}
.wstats{font-size:9px;color:var(--text-dim);font-weight:400;display:block}

/* Span overlays â€” positioned via JS inside cells */
.span-overlay{position:absolute;border-radius:4px;z-index:10;pointer-events:auto;cursor:pointer;display:flex;align-items:center;padding:0 5px;font-size:9px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:opacity .15s,filter .15s}
.span-overlay:hover{filter:brightness(1.4);z-index:15}
.span-overlay.epic-span{background:rgba(218,54,51,.15);border:1px solid rgba(218,54,51,.4);color:#f85149;height:16px;top:2px}
.span-overlay.feature-span{background:rgba(163,113,247,.12);border:1px solid rgba(163,113,247,.35);color:#d2a8ff;height:14px;bottom:2px}
.span-overlay .sp-num{margin-right:3px;opacity:.6}
.span-overlay .sp-range{margin-left:auto;opacity:.5;font-size:8px;padding-left:4px}

/* Task chips */
.batch{background:var(--surface2);border:1px solid var(--border);border-radius:5px;padding:4px 6px;margin-bottom:3px}
.batch-title{font-size:9px;font-weight:600;color:var(--text-dim);text-transform:uppercase;letter-spacing:.3px;margin-bottom:2px}
.tc{display:flex;align-items:center;gap:3px;padding:2px 5px;border-radius:3px;font-size:10px;margin:1px 0;cursor:pointer;border:1px solid transparent;line-height:1.3;transition:opacity .15s}
.tc:hover{border-color:var(--text-dim)}
.tc.task{background:#58a6ff12;color:#79c0ff}
.tc.gate{background:#f0883e15;color:#f0883e;border:1px dashed #f0883e44}
.tc.cp{border-left:3px solid var(--critical)}
.tc .cn{font-weight:600;flex-shrink:0} .tc .ct{overflow:hidden;text-overflow:ellipsis;white-space:nowrap} .tc .cd{color:var(--text-dim);font-size:9px;flex-shrink:0}
.empty-cell{color:var(--border);font-size:11px;text-align:center;padding:8px;font-style:italic}
.gate-row td{background:#f0883e06}
.gate-row td:first-child{background:#f0883e10;color:var(--gate)}

/* Span legend row */
.span-lane td{background:var(--surface2);padding:3px 5px;position:relative;height:40px}
.span-lane td:first-child{background:var(--surface);font-size:11px}

#tooltip{position:fixed;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:12px;font-size:12px;max-width:380px;pointer-events:none;z-index:300;display:none;box-shadow:0 8px 24px rgba(0,0,0,.5)}
.tt-title{font-weight:600;margin-bottom:4px}
.tt-type{font-size:10px;padding:2px 6px;border-radius:3px;display:inline-block;margin-bottom:6px}
.tt-section{margin-top:5px;font-size:11px}
.tt-section strong{color:var(--text-bright)}
.tt-deps{color:var(--text-dim)}
</style>
</head>
<body>
<div id="header">
  <h1>&#128640; Parallel Execution Board</h1>
  <span class="sb" id="s1"></span><span class="sb" id="s2"></span><span class="sb" id="s3"></span><span class="sb" id="s4"></span>
  <input type="text" id="search" placeholder="Search..." oninput="filterBoard(this.value)"/>
  <button class="btn" id="btn-cp" onclick="toggleCP()">Critical Path</button>
  <button class="btn" id="btn-spans" onclick="toggleSpans()">Epic/Feature Spans</button>
  <div class="legend">
    <span><span class="ls" style="background:#da3633"></span> Epic</span>
    <span><span class="ls" style="background:#a371f7"></span> Feature</span>
    <span><span class="ls" style="background:#58a6ff"></span> Task</span>
    <span><span class="ls" style="background:#f0883e;border:1px dashed #f0883e"></span> Gate</span>
    <span><span style="display:inline-block;width:8px;height:8px;background:var(--critical);border-radius:2px"></span> Critical</span>
  </div>
</div>
<div id="board"><table id="grid"></table></div>
<div id="tooltip"></div>
<script>
const ISSUES=
[{"number": 1, "title": "Setup & Initial Structure", "state": "OPEN", "type": "Epic", "labels": ["phase-0-setup", "priority-critical"], "children": [2, 3, 4, 5, 6], "parents": [], "blockedBy": [], "bodyLen": 1016}, {"number": 2, "title": "Rename folder to copilot-media-plugins", "state": "CLOSED", "type": "Task", "labels": ["phase-0-setup", "priority-critical", "good-first-issue"], "children": [], "parents": [1], "blockedBy": [], "bodyLen": 630}, {"number": 3, "title": "Initialize git repository", "state": "CLOSED", "type": "Task", "labels": ["phase-0-setup", "priority-critical"], "children": [], "parents": [1], "blockedBy": [2], "bodyLen": 428}, {"number": 4, "title": "Create directory structure", "state": "CLOSED", "type": "Task", "labels": ["phase-0-setup", "priority-critical"], "children": [], "parents": [1], "blockedBy": [3], "bodyLen": 905}, {"number": 5, "title": "Create .gitignore", "state": "CLOSED", "type": "Task", "labels": ["phase-0-setup", "priority-high"], "children": [], "parents": [1], "blockedBy": [4], "bodyLen": 304}, {"number": 6, "title": "Document research insights", "state": "CLOSED", "type": "Task", "labels": ["documentation", "phase-0-setup", "priority-medium"], "children": [], "parents": [1], "blockedBy": [4], "bodyLen": 301}, {"number": 7, "title": "Core Plugin Infrastructure", "state": "OPEN", "type": "Epic", "labels": ["phase-1-infrastructure", "priority-critical"], "children": [8, 9, 10, 11, 12, 13], "parents": [], "blockedBy": [1], "bodyLen": 1073}, {"number": 8, "title": "Create .mcp.json for ImageSorcery MCP", "state": "OPEN", "type": "Task", "labels": ["phase-1-infrastructure", "priority-critical"], "children": [], "parents": [7], "blockedBy": [4], "bodyLen": 584}, {"number": 9, "title": "Draft README.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-1-infrastructure", "priority-high"], "children": [], "parents": [7], "blockedBy": [4], "bodyLen": 530}, {"number": 10, "title": "Create LICENSE (MIT)", "state": "OPEN", "type": "Task", "labels": ["phase-1-infrastructure", "priority-high"], "children": [], "parents": [7], "blockedBy": [4], "bodyLen": 275}, {"number": 11, "title": "Create CONTRIBUTING.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-1-infrastructure", "priority-medium"], "children": [], "parents": [7], "blockedBy": [4], "bodyLen": 352}, {"number": 12, "title": "Create .github/copilot-instructions.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-1-infrastructure", "priority-high"], "children": [], "parents": [7], "blockedBy": [4], "bodyLen": 369}, {"number": 13, "title": "Document Architecture in docs/ARCHITECTURE.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-1-infrastructure", "priority-high"], "children": [], "parents": [7], "blockedBy": [4], "bodyLen": 470}, {"number": 14, "title": "fal.ai Integration", "state": "OPEN", "type": "Epic", "labels": ["phase-2-fal-ai", "priority-critical", "research-backed"], "children": [], "parents": [], "blockedBy": [7], "bodyLen": 957}, {"number": 15, "title": "Analyze existing fal.ai bash scripts", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-critical"], "children": [], "parents": [106], "blockedBy": [], "bodyLen": 578}, {"number": 16, "title": "Create skills/fal-ai/SKILL.md (<500 lines)", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-critical", "research-backed"], "children": [], "parents": [106], "blockedBy": [15], "bodyLen": 1829}, {"number": 17, "title": "Create Invoke-FalGenerate.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-high"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 2070}, {"number": 18, "title": "Create Search-FalModels.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-high"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 1199}, {"number": 19, "title": "Create Get-ModelSchema.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-high"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 1120}, {"number": 20, "title": "Create Get-QueueStatus.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-high"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 1190}, {"number": 21, "title": "Create Upload-ToFalCDN.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-medium"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 1075}, {"number": 22, "title": "Create New-FalWorkflow.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-high"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 1230}, {"number": 23, "title": "Create Test-FalConnection.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-high"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 1140}, {"number": 24, "title": "Create Get-FalModel.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-medium"], "children": [], "parents": [107], "blockedBy": [15], "bodyLen": 1174}, {"number": 25, "title": "Create Invoke-FalInpainting.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-medium"], "children": [], "parents": [108], "blockedBy": [15], "bodyLen": 1421}, {"number": 26, "title": "Create Invoke-FalUpscale.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-medium"], "children": [], "parents": [108], "blockedBy": [15], "bodyLen": 1152}, {"number": 27, "title": "Create Invoke-FalVideoGen.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-medium"], "children": [], "parents": [108], "blockedBy": [15], "bodyLen": 1345}, {"number": 28, "title": "Create Invoke-FalImageToVideo.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-medium"], "children": [], "parents": [108], "blockedBy": [15], "bodyLen": 1238}, {"number": 29, "title": "Create Get-FalUsage.ps1", "state": "OPEN", "type": "Task", "labels": ["phase-2-fal-ai", "priority-low"], "children": [], "parents": [108], "blockedBy": [15], "bodyLen": 1132}, {"number": 30, "title": "Create references/MODELS.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-2-fal-ai", "priority-medium"], "children": [], "parents": [108], "blockedBy": [16], "bodyLen": 1522}, {"number": 31, "title": "Create references/WORKFLOWS.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-2-fal-ai", "priority-medium"], "children": [], "parents": [108], "blockedBy": [16], "bodyLen": 1517}, {"number": 32, "title": "Create references/ERROR_CODES.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-2-fal-ai", "priority-medium"], "children": [], "parents": [109], "blockedBy": [16], "bodyLen": 1527}, {"number": 33, "title": "Create references/EXAMPLES.md", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-2-fal-ai", "priority-high"], "children": [], "parents": [109], "blockedBy": [16], "bodyLen": 1558}, {"number": 34, "title": "Workflow Builder", "state": "OPEN", "type": "Epic", "labels": ["phase-3-workflow", "priority-high", "research-backed"], "children": [], "parents": [], "blockedBy": [], "bodyLen": 561}, {"number": 35, "title": "ImageSorcery Integration", "state": "OPEN", "type": "Epic", "labels": ["phase-4-imagesorcery", "priority-high", "research-backed"], "children": [], "parents": [], "blockedBy": [8], "bodyLen": 750}, {"number": 36, "title": "Agentic Workflows", "state": "OPEN", "type": "Epic", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [], "blockedBy": [], "bodyLen": 615}, {"number": 37, "title": "Testing & Validation", "state": "OPEN", "type": "Epic", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [], "blockedBy": [], "bodyLen": 650}, {"number": 38, "title": "Documentation", "state": "OPEN", "type": "Epic", "labels": ["documentation", "phase-7-documentation", "priority-medium"], "children": [83, 84, 85, 86, 87, 88], "parents": [], "blockedBy": [], "bodyLen": 618}, {"number": 39, "title": "GitHub Repository Setup", "state": "OPEN", "type": "Epic", "labels": ["phase-8-github-setup", "priority-medium"], "children": [89, 90, 91, 92, 93], "parents": [], "blockedBy": [], "bodyLen": 678}, {"number": 40, "title": "End-to-End Validation", "state": "OPEN", "type": "Epic", "labels": ["phase-9-validation", "priority-critical"], "children": [], "parents": [], "blockedBy": [], "bodyLen": 687}, {"number": 41, "title": "Adapt fal-workflow skill from fal-ai-community", "state": "OPEN", "type": "Task", "labels": ["phase-3-workflow", "priority-critical", "priority-high"], "children": [], "parents": [110], "blockedBy": [33], "bodyLen": 701}, {"number": 42, "title": "Create references/NODE_TYPES.md", "state": "OPEN", "type": "Task", "labels": ["phase-3-workflow", "priority-high"], "children": [], "parents": [111], "blockedBy": [41], "bodyLen": 471}, {"number": 43, "title": "Create references/PATTERNS.md", "state": "OPEN", "type": "Task", "labels": ["phase-3-workflow", "priority-high"], "children": [], "parents": [111], "blockedBy": [41], "bodyLen": 457}, {"number": 44, "title": "Create references/TROUBLESHOOTING.md", "state": "OPEN", "type": "Task", "labels": ["phase-3-workflow", "priority-high"], "children": [], "parents": [111], "blockedBy": [41], "bodyLen": 435}, {"number": 45, "title": "Create New-Workflow.ps1 validation script", "state": "OPEN", "type": "Task", "labels": ["phase-3-workflow", "priority-high"], "children": [], "parents": [111], "blockedBy": [41], "bodyLen": 473}, {"number": 46, "title": "Update .mcp.json for ImageSorcery MCP", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-critical", "priority-high"], "children": [], "parents": [112], "blockedBy": [8], "bodyLen": 377}, {"number": 47, "title": "Create skills/image-sorcery/SKILL.md", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-critical", "priority-high"], "children": [], "parents": [112], "blockedBy": [], "bodyLen": 628}, {"number": 48, "title": "Create references/TIER1_OPERATIONS.md", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-high"], "children": [], "parents": [113], "blockedBy": [47], "bodyLen": 498}, {"number": 49, "title": "Create references/TIER2_OPERATIONS.md", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-high"], "children": [], "parents": [113], "blockedBy": [47], "bodyLen": 508}, {"number": 50, "title": "Create references/TIER3_OPERATIONS.md", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-high"], "children": [], "parents": [113], "blockedBy": [47], "bodyLen": 497}, {"number": 51, "title": "Create references/TIER4_OPERATIONS.md", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-high"], "children": [], "parents": [113], "blockedBy": [47], "bodyLen": 496}, {"number": 52, "title": "Create references/WORKFLOWS.md", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-high"], "children": [], "parents": [113], "blockedBy": [47], "bodyLen": 492}, {"number": 53, "title": "Create references/EXAMPLES.md", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-high"], "children": [], "parents": [113], "blockedBy": [47], "bodyLen": 485}, {"number": 54, "title": "Create Test-ImageSorcery.ps1 validation script", "state": "OPEN", "type": "Task", "labels": ["phase-4-imagesorcery", "priority-critical", "priority-high"], "children": [], "parents": [113], "blockedBy": [47], "bodyLen": 516}, {"number": 55, "title": "Create skills/media-agents/SKILL.md", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-critical", "priority-high", "research-backed"], "children": [], "parents": [114], "blockedBy": [], "bodyLen": 652}, {"number": 56, "title": "Create references/AGENT_PATTERNS.md", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [114], "blockedBy": [55], "bodyLen": 560}, {"number": 57, "title": "Create references/ERROR_HANDLING.md", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [114], "blockedBy": [55], "bodyLen": 549}, {"number": 58, "title": "Create references/QUEUE_MANAGEMENT.md", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [114], "blockedBy": [55], "bodyLen": 548}, {"number": 59, "title": "Create references/MONITORING.md", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [114], "blockedBy": [55], "bodyLen": 544}, {"number": 60, "title": "Implement doc-sync agent (GitHub Action)", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [115], "blockedBy": [55], "bodyLen": 559}, {"number": 61, "title": "Implement test-plugin agent (GitHub Action)", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [115], "blockedBy": [55], "bodyLen": 552}, {"number": 62, "title": "Implement media-workflow agent (GitHub Action)", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-critical", "priority-high", "research-backed"], "children": [], "parents": [115], "blockedBy": [55], "bodyLen": 562}, {"number": 63, "title": "Implement performance-check agent (GitHub Action)", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [115], "blockedBy": [55], "bodyLen": 529}, {"number": 64, "title": "Create .github/workflows/doc-sync.yml", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [116], "blockedBy": [60], "bodyLen": 509}, {"number": 65, "title": "Create .github/workflows/test-plugin.yml", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-high", "research-backed"], "children": [], "parents": [116], "blockedBy": [61], "bodyLen": 515}, {"number": 66, "title": "Create .github/workflows/media-workflow.yml", "state": "OPEN", "type": "Task", "labels": ["phase-5-agents", "priority-critical", "priority-high", "research-backed"], "children": [], "parents": [116], "blockedBy": [62], "bodyLen": 546}, {"number": 67, "title": "Set up Pester testing framework", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-critical", "priority-high"], "children": [], "parents": [117], "blockedBy": [], "bodyLen": 607}, {"number": 68, "title": "Write unit tests for all PowerShell scripts", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-critical", "priority-high"], "children": [], "parents": [117], "blockedBy": [], "bodyLen": 404}, {"number": 69, "title": "Create integration tests for fal.ai skill", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [118], "blockedBy": [16], "bodyLen": 379}, {"number": 70, "title": "Create integration tests for workflow builder", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [118], "blockedBy": [41], "bodyLen": 358}, {"number": 71, "title": "Create integration tests for ImageSorcery MCP", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [118], "blockedBy": [47], "bodyLen": 355}, {"number": 72, "title": "Create E2E scenario: Text-to-image generation", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 69], "bodyLen": 761}, {"number": 73, "title": "Create E2E scenario: Image manipulation workflow", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 71], "bodyLen": 405}, {"number": 74, "title": "Create E2E scenario: Multi-step workflow", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 70], "bodyLen": 401}, {"number": 75, "title": "Create E2E scenario: fal.ai + ImageSorcery combined", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 69, 71], "bodyLen": 440}, {"number": 76, "title": "Create E2E scenario: Agent orchestration", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 70], "bodyLen": 403}, {"number": 77, "title": "Create E2E scenario: Error handling and retry", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 69, 70, 71], "bodyLen": 472}, {"number": 78, "title": "Create E2E scenario: Queue management", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 69], "bodyLen": 400}, {"number": 79, "title": "Create E2E scenario: Model discovery", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 69], "bodyLen": 400}, {"number": 80, "title": "Create E2E scenario: Workflow validation", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 70], "bodyLen": 402}, {"number": 81, "title": "Create E2E scenario: MCP connectivity", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-high"], "children": [], "parents": [119], "blockedBy": [67, 69, 70, 71], "bodyLen": 472}, {"number": 82, "title": "Set up GitHub Actions CI/CD pipeline", "state": "OPEN", "type": "Task", "labels": ["phase-6-testing", "priority-critical", "priority-high"], "children": [], "parents": [119], "blockedBy": [67], "bodyLen": 660}, {"number": 83, "title": "Finalize README.md with complete quick start", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-7-documentation", "priority-medium"], "children": [], "parents": [38], "blockedBy": [16, 41, 47, 55], "bodyLen": 356}, {"number": 84, "title": "Create user guides for all major features", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-7-documentation", "priority-medium"], "children": [], "parents": [38], "blockedBy": [], "bodyLen": 326}, {"number": 85, "title": "Create API reference documentation", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-7-documentation", "priority-medium"], "children": [], "parents": [38], "blockedBy": [], "bodyLen": 337}, {"number": 86, "title": "Update CONTRIBUTING.md with final standards", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-7-documentation", "priority-medium"], "children": [], "parents": [38], "blockedBy": [11, 13], "bodyLen": 362}, {"number": 87, "title": "Create troubleshooting guide", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-7-documentation", "priority-medium"], "children": [], "parents": [38], "blockedBy": [67, 81], "bodyLen": 343}, {"number": 88, "title": "Create examples gallery", "state": "OPEN", "type": "Task", "labels": ["documentation", "phase-7-documentation", "priority-medium"], "children": [], "parents": [38], "blockedBy": [], "bodyLen": 336}, {"number": 89, "title": "Configure repository settings and metadata", "state": "OPEN", "type": "Task", "labels": ["phase-8-github-setup", "priority-medium"], "children": [], "parents": [39], "blockedBy": [], "bodyLen": 263}, {"number": 90, "title": "Set up branch protection on main", "state": "OPEN", "type": "Task", "labels": ["phase-8-github-setup", "priority-medium"], "children": [], "parents": [39], "blockedBy": [82], "bodyLen": 391}, {"number": 91, "title": "Create issue templates (bug, feature, task)", "state": "OPEN", "type": "Task", "labels": ["phase-8-github-setup", "priority-medium"], "children": [], "parents": [39], "blockedBy": [], "bodyLen": 263}, {"number": 92, "title": "Create PR template with checklist", "state": "OPEN", "type": "Task", "labels": ["phase-8-github-setup", "priority-medium"], "children": [], "parents": [39], "blockedBy": [], "bodyLen": 263}, {"number": 93, "title": "Configure release automation workflow", "state": "OPEN", "type": "Task", "labels": ["phase-8-github-setup", "priority-medium"], "children": [], "parents": [39], "blockedBy": [82], "bodyLen": 394}, {"number": 94, "title": "Real-world validation: Text-to-image workflow", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-critical", "priority-high"], "children": [], "parents": [120], "blockedBy": [72], "bodyLen": 658}, {"number": 95, "title": "Real-world validation: Image-to-video workflow", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-critical", "priority-high"], "children": [], "parents": [120], "blockedBy": [75], "bodyLen": 350}, {"number": 96, "title": "Real-world validation: Multi-step manipulation", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-critical", "priority-high"], "children": [], "parents": [120], "blockedBy": [74], "bodyLen": 318}, {"number": 97, "title": "Real-world validation: Agent orchestration", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-high"], "children": [], "parents": [120], "blockedBy": [76], "bodyLen": 318}, {"number": 98, "title": "Real-world validation: Error recovery", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-high"], "children": [], "parents": [], "blockedBy": [77], "bodyLen": 323}, {"number": 99, "title": "Performance optimization: Token usage", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-high"], "children": [], "parents": [121], "blockedBy": [94, 95, 96], "bodyLen": 337}, {"number": 100, "title": "Performance optimization: API latency", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-high"], "children": [], "parents": [121], "blockedBy": [94, 95, 96], "bodyLen": 337}, {"number": 101, "title": "Performance optimization: Queue throughput", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-high"], "children": [], "parents": [121], "blockedBy": [94, 95, 96], "bodyLen": 337}, {"number": 102, "title": "Security review: API key management", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-high"], "children": [], "parents": [122], "blockedBy": [], "bodyLen": 343}, {"number": 103, "title": "Security review: Secret handling", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-high"], "children": [], "parents": [122], "blockedBy": [], "bodyLen": 344}, {"number": 104, "title": "Complete production readiness checklist", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-critical", "priority-high"], "children": [], "parents": [122], "blockedBy": [102, 103], "bodyLen": 328}, {"number": 105, "title": "Prepare v1.0.0 release", "state": "OPEN", "type": "Task", "labels": ["phase-9-validation", "priority-critical", "priority-high"], "children": [], "parents": [122], "blockedBy": [104], "bodyLen": 342}, {"number": 106, "title": "Core Skill Creation", "state": "OPEN", "type": "Feature", "labels": ["phase-2-fal-ai"], "children": [15, 16], "parents": [], "blockedBy": [], "bodyLen": 810}, {"number": 107, "title": "PowerShell Script Conversion", "state": "OPEN", "type": "Feature", "labels": ["phase-2-fal-ai"], "children": [17, 18, 19, 20, 21, 22, 23, 24], "parents": [], "blockedBy": [], "bodyLen": 972}, {"number": 108, "title": "Reference Documentation", "state": "OPEN", "type": "Feature", "labels": ["phase-2-fal-ai"], "children": [25, 26, 27, 28, 29, 30, 31], "parents": [], "blockedBy": [], "bodyLen": 994}, {"number": 109, "title": "Testing & Validation", "state": "OPEN", "type": "Feature", "labels": ["phase-2-fal-ai"], "children": [32, 33], "parents": [], "blockedBy": [16], "bodyLen": 180}, {"number": 110, "title": "Workflow Skill Core", "state": "OPEN", "type": "Feature", "labels": ["phase-3-workflow"], "children": [41], "parents": [], "blockedBy": [], "bodyLen": 781}, {"number": 111, "title": "Workflow References", "state": "OPEN", "type": "Feature", "labels": ["phase-3-workflow"], "children": [42, 43, 44, 45], "parents": [], "blockedBy": [], "bodyLen": 870}, {"number": 112, "title": "ImageSorcery Skill & Config", "state": "OPEN", "type": "Feature", "labels": ["phase-4-imagesorcery"], "children": [46, 47], "parents": [], "blockedBy": [], "bodyLen": 793}, {"number": 113, "title": "Operation Tier Documentation", "state": "OPEN", "type": "Feature", "labels": ["phase-4-imagesorcery"], "children": [48, 49, 50, 51, 52, 53, 54], "parents": [], "blockedBy": [], "bodyLen": 1034}, {"number": 114, "title": "Agent Skill & Patterns", "state": "OPEN", "type": "Feature", "labels": ["phase-5-agents"], "children": [55, 56, 57, 58, 59], "parents": [], "blockedBy": [], "bodyLen": 934}, {"number": 115, "title": "Agent Implementations", "state": "OPEN", "type": "Feature", "labels": ["phase-5-agents"], "children": [60, 61, 62, 63], "parents": [], "blockedBy": [], "bodyLen": 941}, {"number": 116, "title": "GitHub Actions Workflows", "state": "OPEN", "type": "Feature", "labels": ["phase-5-agents"], "children": [64, 65, 66], "parents": [], "blockedBy": [], "bodyLen": 833}, {"number": 117, "title": "Test Framework Setup", "state": "OPEN", "type": "Feature", "labels": ["phase-6-testing"], "children": [67, 68], "parents": [], "blockedBy": [], "bodyLen": 815}, {"number": 118, "title": "Integration Tests", "state": "OPEN", "type": "Feature", "labels": ["phase-6-testing"], "children": [69, 70, 71], "parents": [], "blockedBy": [], "bodyLen": 842}, {"number": 119, "title": "E2E Test Scenarios", "state": "OPEN", "type": "Feature", "labels": ["phase-6-testing"], "children": [72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82], "parents": [], "blockedBy": [], "bodyLen": 1049}, {"number": 120, "title": "Real-World Validation", "state": "OPEN", "type": "Feature", "labels": ["phase-9-validation"], "children": [94, 95, 96, 97], "parents": [], "blockedBy": [], "bodyLen": 887}, {"number": 121, "title": "Performance Optimization", "state": "OPEN", "type": "Feature", "labels": ["phase-9-validation"], "children": [99, 100, 101], "parents": [], "blockedBy": [], "bodyLen": 874}, {"number": 122, "title": "Security & Production Readiness", "state": "OPEN", "type": "Feature", "labels": ["phase-9-validation"], "children": [102, 103, 104, 105], "parents": [], "blockedBy": [], "bodyLen": 999}, {"number": 124, "title": "Create tests/evaluation/ framework directory structure", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [4], "bodyLen": 1156}, {"number": 123, "title": "GATE 1\u0393\u00e5\u00c62: Foundation Validated", "state": "OPEN", "type": "Feature", "labels": [], "children": [], "parents": [], "blockedBy": [1, 15, 37, 67], "bodyLen": 1314}, {"number": 125, "title": "Create Measure-ImageQuality.ps1 (CLIP score, SSIM, LPIPS)", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [67], "bodyLen": 1923}, {"number": 126, "title": "GATE 2\u0393\u00e5\u00c63: Scripts & Skills Validated", "state": "OPEN", "type": "Feature", "labels": [], "children": [], "parents": [], "blockedBy": [16, 17, 29, 47, 48, 51, 55, 56, 59, 67, 68, 125, 137], "bodyLen": 2388}, {"number": 127, "title": "Create Measure-VideoQuality.ps1 (temporal consistency, optical flow)", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [67], "bodyLen": 1751}, {"number": 128, "title": "GATE 3\u0393\u00e5\u00c64: References & Integration Validated", "state": "OPEN", "type": "Feature", "labels": [], "children": [], "parents": [], "blockedBy": [30, 33, 64, 66, 69, 71, 82, 90, 93, 134], "bodyLen": 1828}, {"number": 129, "title": "GATE 4\u0393\u00e5\u00c65: Core Structure & Workflows Validated", "state": "OPEN", "type": "Feature", "labels": [], "children": [], "parents": [], "blockedBy": [4, 13, 41, 72, 75, 78, 79], "bodyLen": 1487}, {"number": 130, "title": "Create Measure-ApiPerformance.ps1 (latency P50/P95/P99, queue wait)", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [23], "bodyLen": 1948}, {"number": 131, "title": "GATE 5\u0393\u00e5\u00c66: Operations & Performance Baselined", "state": "OPEN", "type": "Feature", "labels": [], "children": [], "parents": [], "blockedBy": [42, 45, 70, 83, 86, 94, 95, 130, 132], "bodyLen": 1995}, {"number": 132, "title": "Create Measure-ApiCost.ps1 (per-request cost tracking, budget alerts)", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [29], "bodyLen": 1389}, {"number": 133, "title": "GATE 6\u0393\u00e5\u00c67: E2E & Quality Regression Green", "state": "OPEN", "type": "Feature", "labels": [], "children": [], "parents": [], "blockedBy": [74, 76, 77, 80, 81, 125], "bodyLen": 1817}, {"number": 134, "title": "Create golden prompt dataset for quality regression testing", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [15], "bodyLen": 1886}, {"number": 135, "title": "GATE 7\u0393\u00e5\u00c68: Real-World & Troubleshooting Validated", "state": "OPEN", "type": "Feature", "labels": [], "children": [], "parents": [], "blockedBy": [87, 96, 97, 98, 132], "bodyLen": 2140}, {"number": 136, "title": "Create quality threshold configuration for CI/CD gates", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [15], "bodyLen": 1456}, {"number": 137, "title": "Create Measure-TokenBudget.ps1 (skill file token counting)", "state": "OPEN", "type": "Task", "labels": [], "children": [], "parents": [], "blockedBy": [67], "bodyLen": 1334}];
const REPO='https://github.com/anokye-labs/copilot-media-plugins/issues/';
const M={};ISSUES.forEach(i=>M[i.number]=i);

function ws(i){
  const n=i.number,t=i.title.toLowerCase();
  if(t.includes('gate'))return'gates';
  if(t.includes('measure-')||t.includes('golden prompt')||t.includes('quality threshold')||t.includes('evaluation framework'))return'evaluation';
  if((t.includes('fal')&&!t.includes('workflow'))||(n>=15&&n<=33)||n===134||n===136)return'fal-ai';
  if(t.includes('imagesorcery')||t.includes('image-sorcery')||(t.includes('mcp')&&!t.includes('agent'))||(n>=46&&n<=54))return'imagesorcery';
  if(t.includes('workflow')||(n>=42&&n<=45))return'workflow';
  if(t.includes('agent')||(n>=55&&n<=66))return'agents';
  if(t.includes('e2e')||t.includes('pester')||n===67||n===68||n===82)return'testing';
  if(t.includes('doc')||t.includes('readme')||t.includes('contributing')||t.includes('architecture')||t.includes('guide')||t.includes('examples gallery'))return'docs';
  if(t.includes('security')||t.includes('release')||t.includes('production')||n===104||n===105)return'release';
  if(t.includes('real-world')||t.includes('validation'))return'validation';
  if(t.includes('repo')||t.includes('branch')||t.includes('ci/cd')||t.includes('issue template')||t.includes('pr template')||(n>=89&&n<=93))return'repo-setup';
  if(t.includes('performance')||t.includes('latency')||t.includes('throughput')||t.includes('token usage'))return'performance';
  return'other';
}
ISSUES.forEach(i=>{i._ws=i.type==='Task'?ws(i):null;});

// Waves
function computeWaves(){
  const W=[],a=new Set(),r=new Set(ISSUES.map(i=>i.number));
  while(r.size>0){const w=[];for(const n of r){const i=M[n];if((i.blockedBy||[]).filter(d=>M[d]&&!a.has(d)).length===0)w.push(n);}if(!w.length)for(const n of r)w.push(n);w.forEach(n=>{a.add(n);r.delete(n);});W.push(w);}return W;
}
const waves=computeWaves();
ISSUES.forEach(i=>{waves.forEach((w,wi)=>{if(w.includes(i.number))i._wave=wi;});});
const NW=waves.length;

// Critical path
function findCP(){
  const memo={};
  function lp(n){if(memo[n])return memo[n];const i=M[n];if(!i)return memo[n]={l:0,p:[]};const d=(i.blockedBy||[]).filter(x=>M[x]);if(!d.length)return memo[n]={l:1,p:[n]};let b={l:0,p:[]};d.forEach(x=>{const s=lp(x);if(s.l>b.l)b=s;});return memo[n]={l:b.l+1,p:[...b.p,n]};}
  let cp={l:0,p:[]};ISSUES.forEach(i=>{const p=lp(i.number);if(p.l>cp.l)cp=p;});return new Set(cp.p);
}
const cpSet=findCP();

// Compute spans: ONLY from children waves, not own wave
function getSpans(){
  const epics=[],features=[];
  ISSUES.forEach(i=>{
    if(i.type!=='Epic'&&i.type!=='Feature')return;
    // Gather all descendant task waves recursively
    const visited=new Set();
    function gather(nums){
      nums.forEach(n=>{
        if(visited.has(n))return;visited.add(n);
        const ci=M[n];if(!ci)return;
        if(ci.children&&ci.children.length)gather(ci.children);
      });
    }
    gather(i.children||[]);
    // Only count Task descendants for wave span
    const taskWaves=[...visited].filter(n=>M[n]&&M[n].type==='Task').map(n=>M[n]._wave);
    if(!taskWaves.length)return; // skip if no task descendants
    const sp={n:i.number,title:i.title,type:i.type,sw:Math.min(...taskWaves),ew:Math.max(...taskWaves),tc:taskWaves.length,
      // Which swim lanes do children appear in?
      lanes:new Set([...visited].filter(n=>M[n]&&M[n]._ws).map(n=>M[n]._ws))};
    if(i.type==='Epic')epics.push(sp);else if(!i.title.includes('GATE'))features.push(sp);
  });
  epics.sort((a,b)=>a.sw-b.sw||(b.ew-b.sw)-(a.ew-a.sw));
  features.sort((a,b)=>a.sw-b.sw||(b.ew-b.sw)-(a.ew-a.sw));
  return{epics,features};
}
const spans=getSpans();

const LANES=[
  {id:'fal-ai',label:'fal.ai Scripts',icon:'\u{1F3A8}'},
  {id:'imagesorcery',label:'ImageSorcery',icon:'\u{1F5BC}'},
  {id:'workflow',label:'Workflow',icon:'\u2699'},
  {id:'agents',label:'Agents',icon:'\u{1F916}'},
  {id:'testing',label:'Testing',icon:'\u{1F9EA}'},
  {id:'evaluation',label:'Evaluation',icon:'\u{1F4C8}'},
  {id:'docs',label:'Documentation',icon:'\u{1F4DA}'},
  {id:'repo-setup',label:'Repo & CI/CD',icon:'\u{1F4E6}'},
  {id:'validation',label:'Validation',icon:'\u2705'},
  {id:'performance',label:'Performance',icon:'\u26A1'},
  {id:'release',label:'Release',icon:'\u{1F680}'},
  {id:'other',label:'Other',icon:'\u{1F527}'},
  {id:'gates',label:'Wave Gates',icon:'\u{1F6A2}'}
];
const activeLanes=LANES.filter(l=>ISSUES.some(i=>i._ws===l.id));

function esc(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}

function getBatches(lid,wi){
  const items=ISSUES.filter(i=>i._ws===lid&&i._wave===wi);
  if(!items.length)return[];
  const b={};
  items.forEach(it=>{
    let k='tasks';const t=it.title.toLowerCase();
    if(t.includes('gate'))k='gate';
    else if(t.includes('reference')||t.includes('references/'))k='refs';
    else if(t.includes('.ps1'))k='scripts';
    else if(t.includes('e2e')||t.includes('scenario'))k='e2e';
    else if(t.includes('integration'))k='integ';
    else if(t.includes('real-world'))k='real-world';
    else if(t.includes('implement'))k='impl';
    else if(t.includes('measure'))k='measure';
    else if(t.includes('create')&&(t.includes('skill')||t.includes('config')))k='setup';
    if(!b[k])b[k]=[];b[k].push(it);
  });
  return Object.entries(b).map(([k,items])=>({key:k,label:k.charAt(0).toUpperCase()+k.slice(1).replace(/-/g,' '),items:items.sort((a,b)=>a.number-b.number)}));
}

// Render
function render(){
  const tbl=document.getElementById('grid');
  let h='<thead><tr><th>Swim Lane</th>';
  for(let wi=0;wi<NW;wi++)h+='<th>Wave '+(wi+1)+'<span class="wstats">'+waves[wi].filter(n=>M[n]&&M[n].type==='Task').length+' tasks</span></th>';
  h+='</tr></thead><tbody>';

  // Epic span rows
  spans.epics.forEach((sp,si)=>{
    h+='<tr class="span-lane" data-span-row="epic"><td style="color:var(--epic);font-size:11px">\u{1F3C6} #'+sp.n+'</td>';
    for(let wi=0;wi<NW;wi++){
      if(wi===sp.sw){
        const colspan=sp.ew-sp.sw+1;
        h+='<td colspan="'+colspan+'" style="position:relative;padding:0">';
        h+='<div class="span-overlay epic-span" style="left:2px;right:2px;top:50%;transform:translateY(-50%)" data-num="'+sp.n+'" onmouseenter="showTip(event,'+sp.n+')" onmouseleave="hideTip()" ondblclick="window.open(\''+REPO+sp.n+'\',\'_blank\')">';
        h+='<span class="sp-num">#'+sp.n+'</span>'+esc(sp.title.substring(0,50));
        h+='<span class="sp-range">'+sp.tc+' tasks \u00B7 W'+(sp.sw+1)+'\u2013'+(sp.ew+1)+'</span></div></td>';
        wi=sp.ew; // skip spanned columns
      } else {
        h+='<td></td>';
      }
    }
    h+='</tr>';
  });

  // Feature span rows
  spans.features.forEach(sp=>{
    h+='<tr class="span-lane" data-span-row="feature"><td style="color:var(--feature);font-size:11px">\u{1F4CC} #'+sp.n+'</td>';
    for(let wi=0;wi<NW;wi++){
      if(wi===sp.sw){
        const colspan=sp.ew-sp.sw+1;
        h+='<td colspan="'+colspan+'" style="position:relative;padding:0">';
        h+='<div class="span-overlay feature-span" style="left:2px;right:2px;top:50%;transform:translateY(-50%)" data-num="'+sp.n+'" onmouseenter="showTip(event,'+sp.n+')" onmouseleave="hideTip()" ondblclick="window.open(\''+REPO+sp.n+'\',\'_blank\')">';
        h+='<span class="sp-num">#'+sp.n+'</span>'+esc(sp.title.substring(0,45));
        h+='<span class="sp-range">'+sp.tc+' \u00B7 W'+(sp.sw+1)+'\u2013'+(sp.ew+1)+'</span></div></td>';
        wi=sp.ew;
      } else {
        h+='<td></td>';
      }
    }
    h+='</tr>';
  });

  // Separator
  h+='<tr><td colspan="'+(NW+1)+'" style="background:var(--border);height:3px;padding:0;border:none"></td></tr>';

  // Task swim lanes
  activeLanes.forEach(lane=>{
    const li=ISSUES.filter(i=>i._ws===lane.id);
    const isGate=lane.id==='gates';
    h+='<tr class="'+(isGate?'gate-row':'')+'">';
    h+='<td>'+lane.icon+' '+lane.label+'<div class="lane-count">'+li.length+'</div></td>';
    for(let wi=0;wi<NW;wi++){
      const batches=getBatches(lane.id,wi);
      if(!batches.length){h+='<td><div class="empty-cell">\u2014</div></td>';continue;}
      h+='<td>';
      batches.forEach(b=>{
        h+='<div class="batch"><div class="batch-title">'+esc(b.label)+' ('+b.items.length+')</div>';
        b.items.forEach(it=>{
          const isG=it.title.includes('GATE'),isCrit=cpSet.has(it.number);
          const cls=(isG?'gate':'task')+(isCrit?' cp':'');
          const deps=(it.blockedBy||[]).length;
          const ds=deps?'<span class="cd">'+deps+'d</span>':'';
          const tt=esc(it.title.substring(0,42)+(it.title.length>42?'\u2026':''));
          h+='<div class="tc '+cls+'" data-num="'+it.number+'" onmouseenter="showTip(event,'+it.number+')" onmouseleave="hideTip()" ondblclick="window.open(\''+REPO+it.number+'\',\'_blank\')"><span class="cn">#'+it.number+'</span><span class="ct">'+tt+'</span>'+ds+'</div>';
        });
        h+='</div>';
      });
      h+='</td>';
    }
    h+='</tr>';
  });
  h+='</tbody>';
  tbl.innerHTML=h;

  document.getElementById('s1').textContent=ISSUES.length+' issues';
  document.getElementById('s2').textContent=NW+' waves';
  document.getElementById('s3').textContent=activeLanes.length+' swim lanes';
  document.getElementById('s4').textContent=cpSet.size+' critical path';
}

// Tooltip
const tip=document.getElementById('tooltip');
function showTip(e,num){
  const i=M[num];if(!i)return;
  const deps=(i.blockedBy||[]).map(d=>M[d]?'#'+d+' '+esc(M[d].title.substring(0,30)):'#'+d);
  const ch=(i.children||[]).map(d=>M[d]?'#'+d+' '+esc(M[d].title.substring(0,30)):'#'+d);
  const tc={Epic:'#da3633',Feature:'#a371f7',Task:'#58a6ff'};
  let html='<div class="tt-title">#'+num+' '+esc(i.title)+'</div>';
  html+='<span class="tt-type" style="background:'+(tc[i.type]||'#8b949e')+'33;color:'+(tc[i.type]||'#8b949e')+'">'+i.type+'</span>';
  if(cpSet.has(num))html+=' <span style="color:#f85149;font-size:11px">\u25CF Critical</span>';
  html+='<div class="tt-section"><strong>Wave:</strong> '+(i._wave+1);
  if(i._ws)html+=' | <strong>Lane:</strong> '+i._ws;
  html+='</div>';
  if(deps.length)html+='<div class="tt-section tt-deps"><strong>Blocked by ('+deps.length+'):</strong><br>'+deps.join('<br>')+'</div>';
  if(ch.length)html+='<div class="tt-section tt-deps"><strong>Children ('+ch.length+'):</strong><br>'+ch.join('<br>')+'</div>';
  tip.innerHTML=html;tip.style.display='block';
  let left=e.clientX+12,top=e.clientY+12;
  if(left+380>window.innerWidth)left=e.clientX-390;
  if(top+tip.offsetHeight>window.innerHeight)top=e.clientY-tip.offsetHeight-12;
  tip.style.left=left+'px';tip.style.top=top+'px';
}
function hideTip(){tip.style.display='none';}

let cpHL=false;
function toggleCP(){
  cpHL=!cpHL;document.getElementById('btn-cp').classList.toggle('active',cpHL);
  document.querySelectorAll('[data-num]').forEach(el=>{el.style.opacity=cpHL&&!cpSet.has(parseInt(el.dataset.num))?'0.12':'1';});
}
let spansVisible=true;
function toggleSpans(){
  spansVisible=!spansVisible;document.getElementById('btn-spans').classList.toggle('active',!spansVisible);
  document.querySelectorAll('[data-span-row]').forEach(r=>r.style.display=spansVisible?'':'none');
}
function filterBoard(q){
  q=q.toLowerCase();
  document.querySelectorAll('[data-num]').forEach(el=>{
    const num=parseInt(el.dataset.num),i=M[num];
    if(!q){el.style.display='';return;}
    el.style.display=i&&(i.title.toLowerCase().includes(q)||('#'+num).includes(q)||(i._ws||'').includes(q))?'':'none';
  });
}
render();
</script>
</body>
</html>