# Release Plan — v1.0.0 "Foundation"

> First public release of the Copilot Media Plugins extension.

## Release Metadata

| Field | Value |
|-------|-------|
| **Version** | 1.0.0 |
| **Codename** | Foundation |
| **Target** | After all 8 waves complete |
| **Branch** | `wave3/release` → `main` |
| **Tag** | `v1.0.0` |

---

## Included Features

### 1. fal.ai Integration (14 PowerShell Scripts)

| Script | Purpose |
|--------|---------|
| `Invoke-FalGenerate.ps1` | Text-to-image generation |
| `Invoke-FalUpscale.ps1` | Image upscaling |
| `Invoke-FalInpainting.ps1` | Image inpainting / editing |
| `Invoke-FalImageToVideo.ps1` | Image-to-video conversion |
| `Invoke-FalVideoGen.ps1` | Text-to-video generation |
| `New-FalWorkflow.ps1` | Multi-step workflow orchestration |
| `Search-FalModels.ps1` | Model discovery |
| `Get-FalModel.ps1` | Model metadata lookup |
| `Get-ModelSchema.ps1` | Model input/output schema |
| `Get-FalUsage.ps1` | API usage & billing info |
| `Get-QueueStatus.ps1` | Queue status polling |
| `Test-FalConnection.ps1` | API connectivity validation |
| `Upload-ToFalCDN.ps1` | CDN file uploads |
| `Test-ImageSorcery.ps1` | ImageSorcery integration check |

Core module: `scripts/FalAi.psm1`

### 2. ImageSorcery MCP Integration (4 Operation Tiers)

| Tier | Operations |
|------|-----------|
| Tier 1 | Basic transforms (resize, crop, rotate) |
| Tier 2 | Filters & effects (blur, sharpen, color adjust) |
| Tier 3 | Composition (overlay, watermark, collage) |
| Tier 4 | Advanced (OCR, object detection, segmentation) |

Reference docs: `skills/image-sorcery/references/`

### 3. Agent Orchestration Patterns

- Fleet dispatch for parallel generation
- Multi-step workflows (generate → evaluate → refine)
- Queue management with exponential backoff
- Error handling and retry strategies

Reference docs: `skills/media-agents/references/`

### 4. Quality Evaluation Framework

- `Measure-ImageQuality.ps1` — brightness, contrast, entropy checks
- `Measure-VideoQuality.ps1` — video quality metrics
- `Measure-TokenBudget.ps1` — skill file size validation
- Golden prompts dataset (`tests/fixtures/golden-prompts.json`, 20+ entries)
- Quality thresholds (`tests/fixtures/quality-thresholds.json`)

### 5. CI/CD Pipeline

| Workflow | File |
|----------|------|
| Plugin tests | `.github/workflows/test-plugin.yml` |
| Media workflow | `.github/workflows/media-workflow.yml` |
| Performance checks | `.github/workflows/performance-check.yml` |
| Doc sync | `.github/workflows/doc-sync.yml` |

---

## Pre-Release Checklist

Complete every item in [`docs/production-readiness.md`](../production-readiness.md) before tagging:

- [ ] Security review passed
- [ ] All skill files under 500 lines / 6500 tokens
- [ ] Error handling covers all failure modes
- [ ] Rate limiting & retry logic in place
- [ ] Structured logging configured
- [ ] All gate tests passing (Gate 1, Gate 2, Gate 3)
- [ ] Unit, integration, evaluation, and E2E tests passing
- [ ] CI/CD pipeline operational with quality gates
- [ ] Documentation complete (user guides, API reference, architecture, examples)
- [ ] Performance baselines established
- [ ] Quality thresholds configured and validated
- [ ] AGENTS.md up to date
- [ ] SECURITY.md reviewed

---

## Known Limitations

1. **fal.ai dependency** — all generation requires a valid `FAL_KEY`; no offline/mock mode for production use.
2. **PowerShell only** — scripts target PowerShell 7+; no cross-runtime support (Python, Node).
3. **No streaming** — queue-based polling, not server-sent events; latency floor is the poll interval.
4. **CLIP scoring optional** — advanced quality metrics require Python + `transformers` installed separately.
5. **Single-user** — no multi-tenant or concurrent-user session management.
6. **ImageSorcery local only** — MCP server must run on the same machine as the Copilot client.

---

## Migration Notes (Bash → PowerShell)

The project originated with bash prototypes. All production scripts are now PowerShell.

| Bash Pattern | PowerShell Equivalent |
|--------------|----------------------|
| `curl -s` | `Invoke-RestMethod` / `Invoke-WebRequest` |
| `jq '.field'` | `ConvertFrom-Json` + property access |
| `export VAR=val` | `$env:VAR = 'val'` |
| `set -e` | `$ErrorActionPreference = 'Stop'` |
| `trap cleanup EXIT` | `try/finally` blocks |
| `basename / dirname` | `Split-Path -Leaf` / `Split-Path -Parent` |

See [`docs/bash-analysis.md`](../bash-analysis.md) for the full migration analysis.

---

## Changelog Template

```markdown
# Changelog — v1.0.0 "Foundation"

## Added
- fal.ai integration with 14 PowerShell scripts
- ImageSorcery MCP integration (4 operation tiers)
- Agent orchestration patterns (fleet dispatch, multi-step workflows)
- Quality evaluation framework (image, video, token budget)
- CI/CD pipeline (4 GitHub Actions workflows)
- Gate validation tests (Gate 1, Gate 2, Gate 3)
- Golden prompts dataset (20+ entries, 5+ categories)
- Production readiness checklist
- Security documentation (API key management, secret handling)
- User guides, API reference, architecture docs, examples gallery

## Changed
- Migrated all scripts from bash to PowerShell 7+

## Fixed
- N/A (initial release)

## Security
- API key management via environment variables only
- Secret scanning in CI pipeline
- No secrets committed to source control
```
